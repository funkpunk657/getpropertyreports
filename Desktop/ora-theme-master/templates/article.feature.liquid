<!-- SETUP
  Setup all of the variables used in the article template:
    1. Category
    2. Background / Feature Images
    3. Infographics
    4. Misc
 -->
{% for tag in article.tags %}
  {% if tag contains "category=" %}
    {% assign t = tag | split: "=" %}
    {% assign category = t[1] %}
  {% endif %}
  {% if tag contains "author=" %}
    {% assign t = tag | split: "=" %}
    {% assign author = t[1] %}
  {% endif %}
  {% if tag contains "author_link=" %}
    {% assign t = tag | split: "=" %}
    {% assign author_link = t[1] %}
  {% endif %}
  {% if tag contains "author_link_text=" %}
    {% assign t = tag | split: "=" %}
    {% assign author_link_text = t[1] %}
  {% endif %}
  {% if tag contains "feature_image=" %}
    {% assign t = tag | split: "=" %}
    {% assign feature_image = t[1] %}
  {% endif %}
  {% if tag contains "feature_image_mobile=" %}
    {% assign t = tag | split: "=" %}
    {% assign feature_image_mobile = t[1] %}
  {% endif %}
  {% if tag contains "recommendation_text" %}
    {% assign recommended_products = true %}
    {% assign recommendation_text = tag | split: "=" | last %}
  {% endif %}
{% endfor %}
<!-- START ARTICLE -->
<div id="article" class="feature">
  <div class="hero"> 
    <div class="article__title-wrapper">
      <h5 class="article__category">{{ category }}</h5>
      <h1 class="article__title">{{ article.title }}</h1>
    </div>
    <div class="article__author-wrapper">
      <p class="article__author">{{ author }} for Ora Organic</p>
      <a href="{{ author_link }}" target="_blank" class="article__author-link">{{ author_link_text }}</a>
    </div>
  </div>
  <div class="content">
    <div id="content" class="article__content">  
      
      <!-- Article: Content -->
      {{ article.content }}

      <!-- Article: Product Recommendations -->
      {% if recommended_products %}
        {% include 'recommendations_products' %}
      {% endif %}

    </div>
  </div>
  <!--START ACTIONS-->
  <div class="actions">
    <a id="back__button" href="{{ blog.url }}">Back to {% if blog.handle == "news" %}the Ora Blog{% else %}Jobs{% endif %}</a>
  </div>
  <!--END ACTIONS-->
</div>
<!-- Template specific styling -->
<style>
#main {
  margin-top: 0;
  padding-top: 75px;
}
#article.feature .hero {
  background-image: url({{ feature_image }});
}
{% for tag in article.tags %}
  {% if tag contains 'mobile_position=center' %}
    @media (max-width: 991px) {
      #article.feature .hero {
        justify-content: center;
      }
    }
  {% endif %}
{% endfor %}
{% if feature_image_mobile %}
  @media (max-width: 468px) {
    #article.feature .hero {
      background-image: url({{ feature_image_mobile }});
    }
  }
{% endif %}
</style>
<script>
  $(document).ready(function() {
     /* Clear header if tagged */
    {% for tag in article.tags %}
      {% if tag contains 'clear_header' %}
        // If scroll top is 0, then add top class to make header transparent
        if ($(window).scrollTop() == 0) { 
          $('header').addClass('top'); 
        }
        // Listen to the page scrolling
        $(window).scroll(function() {
          if ($(this).scrollTop() < 180) {
            $('header').addClass('top');
          } else {
            $('header').removeClass('top');
          }
        })
      {% endif %}
      {% if tag contains 'theme=light' %}
        $('.article__category, .article__title, .article__author').css('color', '#FFF');
      {% endif %}
      {% if tag contains 'theme=dark' %}
        $('header').addClass('dark');
        $('.article__title, .article__author').css('color', '#484444');
      {% endif %}
    {% endfor %}
    /* Add Template Type to URL */
    if (window.location.href.indexOf('articleType') == -1) {
      window.location.href += "?articleType={{ template | replace: 'article.', '' }}";  
    }
  })
</script>
